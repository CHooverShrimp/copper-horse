---
export const prerender = false;

import Layout from '@layouts/Layout.astro';
import BoxComponent from '@components/BoxComponent.astro';

type Box = {
	Active: string;
	[key: string]: any;
};

const response = await fetch('https://opensheet.elk.sh/1HQtbx_W_TRkViZCQcqflwximoPfXE-XQF9-YMWMAd14/Sheet1');
const boxes: Box[] = await response.json();

// Filter only active items
const activeBoxes = boxes.filter((box: Box) => box.Active === "TRUE");
---

<Layout>
	<div class="grid grid-container">
		{activeBoxes.map(box => (
			<BoxComponent Item={box.Item} {...box} />
		))}
	</div>
</Layout>

<style>
	.grid-container {
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
		gap: 2rem;
		padding: 2rem;
		max-width: 1200px;
		margin: 0 auto;
	}

	@media (max-width: 768px) {
		.grid-container {
			grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
			gap: 1rem;
			padding: 1rem;
		}
	}